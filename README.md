# Логирование и многопоточная обработка сообщений

Этот проект представляет собой библиотеку для логирования и консольное приложение, демонстрирующее её использование в многопоточной среде. Библиотека позволяет записывать сообщения с различными уровнями важности, а приложение обеспечивает асинхронную обработку и запись этих сообщений.

---

## Содержание
1. [Описание проекта](#описание-проекта)
2. [Сборка проекта](#сборка-проекта)
3. [Использование](#использование)
4. [Пример работы](#пример-работы)

---

## Описание проекта

### Библиотека для логирования
- **Уровни логирования**: Поддерживаются уровни `INFO`, `WARNING` и `ERROR`.
- **Потокобезопасность**: Использование мьютексов гарантирует корректную работу в многопоточной среде.
- **Гибкость**: Уровень логирования можно изменять во время выполнения программы.
- **Запись в файл**: Сообщения записываются в указанный файл журнала.

### Многопоточное приложение
- **Асинхронная обработка**: Сообщения обрабатываются в отдельном потоке, что позволяет не блокировать основной поток выполнения.
- **Интерактивный ввод**: Пользователь может вводить сообщения и выбирать уровень их важности.
- **Корректное завершение**: Приложение корректно завершает работу, сохраняя все сообщения в журнал.

---

## Сборка проекта

1. Клонируйте репозиторий:
   ```bash
   git clone https://github.com/BioGD/test_task_logger.git
   cd test_task_logger
   cd log
   ```

2. Соберите проект:
   ```bash
   make
   ```
   В результате будут созданы:
   - `liblogging.so`: Динамическая библиотека для логирования.
   - `test_app`: Многопоточное приложение для демонстрации работы библиотеки.

3. Установите переменную окружения LD_LIBRARY_PATH в текущий каталог для текущей сессии shell:
   ```bash
   export LD_LIBRARY_PATH=.
   ```

4. Очистка проекта:
   ```bash
   make clean
   ```

---

## Использование

### Запуск приложения
Запустите приложение, указав имя файла журнала без его расширения (будет создан файл с расширением "log") и уровень логирования по умолчанию:
```bash
./test_app <journal name> <level of log>
```
- `<файл_журнала>`: Имя файла для записи логов (например, `test_file`).
- `<уровень_важности>`: Уровень логирования по умолчанию (0 — `INFO`, 1 — `WARNING`, 2 — `ERROR`).

Пример:
```bash
./test_app test_file 1
```

### Взаимодействие с приложением
1. Введите сообщение, когда программа запросит.
2. Укажите уровень важности (или нажмите Enter, чтобы использовать уровень по умолчанию).

---

## Пример работы

После запуска приложения и ввода нескольких сообщений, файл журнала (например, `test_file.log`) будет содержать записи следующего вида:
```
[2023-10-10 12:34:56][INFO] This is an informational message.
[2023-10-10 12:34:57][WARNING] This is a warning.
[2023-10-10 12:34:58][ERROR] This is an error message.
